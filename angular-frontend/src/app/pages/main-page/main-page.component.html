<h4 style="font-weight: bold" *ngIf="pageDataService.searchWord != null">{{ pageDataService.searchWord + " " }}
    Found: {{ this.page ? this.page.totalElements : 0 }}</h4>
<div class="main-container">
    <aside class="filter-panel card_with_shadow card">
        <div class="filter-block">
            <input class="form-check-input " type="checkbox" (change)="this.getProducts(0)" id="withPhotoCheck"
                   [(ngModel)]="pageDataService.isFilteredByWithPhoto">
            <label class="form-check-label ps-2" for="withPhotoCheck">
                With a photo
            </label>
        </div>
        <div class="filter-block">
            <input class="form-check-input" type="checkbox" (change)="this.getProducts(0)" id="verifiedCheck"
                   [(ngModel)]="pageDataService.isFilteredByVerified">
            <label class="form-check-label ps-2" for="verifiedCheck">
                Verified
            </label>
        </div>
    </aside>

    <div class="catalog-container">
        <div class="sort-panel-wrap card card_with_shadow">
            <div class="sort-panel popover-wrap">
                <span class="sort-panel_label">Sorting:</span>
                <a type="button" class="ui-link" (click)="sortByDate()">
                    <span class="sort-panel__selected">Popular first</span>
                    <span class="sort-panel__icon"></span>
                </a>
            </div>
            <div class="sort-panel_view-mode">
                <input type="radio" id="mode-tile" class="sort-panel_view-mode-input" value="tile" checked>
                <i for="mode-tile" class="fa-solid fa-grip-vertical fa-xl sort-panel_view-mode-label sort-panel_view-mode-label_tile"></i>
                <input type="radio" id="mode-simple" class="sort-panel_view-mode-input" value="simple">
                <i for="mode-simple" class="fa-solid fa-list-ul fa-xl sort-panel_view-mode-label sort-panel_view-mode-label_simple"></i>
            </div>
        </div>

        <app-product-list [card]="products" [isOrders]="false" [isNeedFavourites]="true"></app-product-list>

    </div>

</div>


<ng-container *ngIf="page && page.totalPages > 1">
    <nav aria-label="...">
        <ul class="pagination">
            <li class="page-item" [ngClass]="page.pageable.pageNumber == 0? 'disabled': ''">
                <span class="page-link" (click)="getProducts(page.pageable.pageNumber  - 1)"
                      type="button">Previous</span>
            </li>
            <ng-container *ngIf="page.totalPages > 2">
                <li class="page-item" [ngClass]="page.pageable.pageNumber  == 0? 'active':''">
                    <a type="button" class="page-link" (click)="getProducts(0)">1</a>
                </li>
                <li class="page-item" [ngClass]="page.pageable.pageNumber  == 1? 'active':''">
                    <a type="button" class="page-link" (click)="getProducts(1)">2</a>
                </li>
                <li class="page-item" [ngClass]="page.pageable.pageNumber  == 2? 'active':''">
                    <a type="button" class="page-link" (click)="getProducts(2)">3</a>
                </li>
            </ng-container>
            <ng-container
                *ngIf="page.pageable.pageNumber > 1 && (page.pageable.pageNumber - 1 < page.totalPages - 1)">
                <li class="page-item disabled" *ngIf="page.pageable.pageNumber > 5">
                    <a class="page-link">...</a>
                </li>
                <li class="page-item"
                    *ngIf="page.pageable.pageNumber - 4 > 0 && page.totalPages - 1 > page.pageable.pageNumber">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.pageable.pageNumber-2)">{{ page.pageable.pageNumber - 1 }}</a>
                </li>
                <li class="page-item"
                    *ngIf="page.pageable.pageNumber - 3 > 0 && page.totalPages - 2 > page.pageable.pageNumber">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.pageable.pageNumber-1)">{{ page.pageable.pageNumber }}</a>
                </li>
                <li class="page-item active"
                    *ngIf="page.pageable.pageNumber - 2 > 0 && page.totalPages - 3 > page.pageable.pageNumber">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.pageable.pageNumber)">{{ page.pageable.pageNumber + 1 }}</a>
                </li>
                <li class="page-item" *ngIf="page.totalPages - 4 > page.pageable.pageNumber">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.pageable.pageNumber+1)">{{ page.pageable.pageNumber + 2 }}</a>
                </li>
                <li class="page-item" *ngIf="page.totalPages - 5 > page.pageable.pageNumber">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.pageable.pageNumber+2)">{{ page.pageable.pageNumber + 3 }}</a>
                </li>
            </ng-container>
            <ng-container>
                <li class="page-item disabled" *ngIf="page.totalPages - 6 > page.pageable.pageNumber">
                    <a class="page-link">...</a>
                </li>
                <li class="page-item" *ngIf="page.totalPages > 5"
                    [ngClass]="page.pageable.pageNumber + 1 == page.totalPages - 2? 'active':''">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.totalPages - 3)">{{ page.totalPages - 2 }}</a>
                </li>
                <li class="page-item" *ngIf="page.totalPages > 1"
                    [ngClass]="page.pageable.pageNumber + 1 == page.totalPages - 1? 'active':''">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.totalPages - 2)">{{ page.totalPages - 1 }}</a>
                </li>
                <li class="page-item" [ngClass]="page.pageable.pageNumber + 1 == page.totalPages? 'active':''">
                    <a type="button" class="page-link"
                       (click)="getProducts(page.totalPages - 1)">{{ page.totalPages }}</a>
                </li>
            </ng-container>
            <li class="page-item">
                <a class="page-link" [ngClass]="page.pageable.pageNumber + 1 == page.totalPages? 'disabled': ''"
                   (click)="getProducts(page.pageable.pageNumber  + 1);" type="button">Next</a>
            </li>
        </ul>
    </nav>
</ng-container>
